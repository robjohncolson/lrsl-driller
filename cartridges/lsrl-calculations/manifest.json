{
  "meta": {
    "id": "lsrl-calculations",
    "name": "LSRL Calculations",
    "subject": "AP Statistics",
    "unit": "2",
    "lesson": "8",
    "skill": "Calculate slope (b), y-intercept (a), and standard deviation using formulas",
    "description": "Students practice computational skills for regression: b = r(sáµ§/sâ‚“), a = È³ - bxÌ„, and s = âˆš[Î£(x-xÌ„)Â²/(n-1)]"
  },
  "config": {
    "contextsFile": "contexts.json",
    "skills": ["slope-calculation", "intercept-calculation", "standard-deviation", "full-lsrl"]
  },
  "display": {
    "showGraph": false,
    "showFormulaReference": true,
    "formulaPanel": {
      "slope": "b = r Â· (sáµ§ / sâ‚“)",
      "intercept": "a = È³ âˆ’ b Â· xÌ„",
      "stdDev": "s = âˆš[Î£(xáµ¢ âˆ’ xÌ„)Â² / (n âˆ’ 1)]"
    },
    "infoPanel": [
      { "label": "Mode", "value": "{{modeName}}" },
      { "label": "Problem", "value": "{{problemNumber}} of {{totalProblems}}" }
    ]
  },
  "modes": [
    {
      "id": "find-b",
      "name": "Find Slope (b)",
      "unlockedBy": "default",
      "description": "Given r, sâ‚“, and sáµ§, calculate the slope b",
      "layout": {
        "given": [
          { "id": "r", "label": "r", "format": "decimal3" },
          { "id": "sx", "label": "sâ‚“", "format": "decimal2" },
          { "id": "sy", "label": "sáµ§", "format": "decimal2" }
        ],
        "inputs": [
          {
            "id": "b",
            "label": "b = ",
            "type": "number",
            "step": "any",
            "placeholder": "Calculate slope",
            "width": "medium"
          }
        ],
        "formulaHint": "b = r Â· (sáµ§ / sâ‚“)"
      }
    },
    {
      "id": "find-a",
      "name": "Find Y-Intercept (a)",
      "unlockedBy": "default",
      "description": "Given xÌ„, È³, and b, calculate the y-intercept a",
      "layout": {
        "given": [
          { "id": "xBar", "label": "xÌ„", "format": "decimal2" },
          { "id": "yBar", "label": "È³", "format": "decimal2" },
          { "id": "b", "label": "b", "format": "decimal3" }
        ],
        "inputs": [
          {
            "id": "a",
            "label": "a = ",
            "type": "number",
            "step": "any",
            "placeholder": "Calculate y-intercept",
            "width": "medium"
          }
        ],
        "formulaHint": "a = È³ âˆ’ b Â· xÌ„"
      }
    },
    {
      "id": "full-lsrl",
      "name": "Full LSRL Equation",
      "unlockedBy": { "gold": 5 },
      "description": "Given summary statistics, find both b and a",
      "celebrationMessage": "ðŸŽ‰ Full LSRL Mode Unlocked! You've mastered the individual formulas.",
      "layout": {
        "given": [
          { "id": "r", "label": "r", "format": "decimal3" },
          { "id": "sx", "label": "sâ‚“", "format": "decimal2" },
          { "id": "sy", "label": "sáµ§", "format": "decimal2" },
          { "id": "xBar", "label": "xÌ„", "format": "decimal2" },
          { "id": "yBar", "label": "È³", "format": "decimal2" }
        ],
        "inputs": [
          {
            "id": "b",
            "label": "b = ",
            "type": "number",
            "step": "any",
            "placeholder": "Calculate slope first",
            "width": "medium",
            "order": 1
          },
          {
            "id": "a",
            "label": "a = ",
            "type": "number",
            "step": "any",
            "placeholder": "Then calculate y-intercept",
            "width": "medium",
            "order": 2
          }
        ],
        "equationPreview": {
          "template": "Å· = {{a}} + {{b}}x",
          "showWhenComplete": true
        }
      }
    },
    {
      "id": "std-dev",
      "name": "Standard Deviation",
      "unlockedBy": { "gold": 3 },
      "description": "Given a small dataset, calculate the mean and sample standard deviation",
      "celebrationMessage": "ðŸ“Š Standard Deviation Mode Unlocked!",
      "layout": {
        "given": [
          { "id": "dataset", "label": "Data", "format": "array", "display": "inline" },
          { "id": "n", "label": "n", "format": "integer" }
        ],
        "inputs": [
          {
            "id": "mean",
            "label": "xÌ„ = ",
            "type": "number",
            "step": "any",
            "placeholder": "Calculate mean first",
            "width": "medium",
            "order": 1
          },
          {
            "id": "stdDev",
            "label": "s = ",
            "type": "number",
            "step": "any",
            "placeholder": "Then calculate std dev",
            "width": "medium",
            "order": 2
          }
        ],
        "showWorkTable": {
          "enabled": true,
          "columns": ["xáµ¢", "(xáµ¢ âˆ’ xÌ„)", "(xáµ¢ âˆ’ xÌ„)Â²"],
          "helperRow": "Î£(xáµ¢ âˆ’ xÌ„)Â² = ?"
        }
      }
    },
    {
      "id": "sign-check",
      "name": "Quick Sign Check",
      "unlockedBy": "default",
      "description": "Conceptual warm-up: predict the sign of the slope",
      "layout": {
        "given": [
          { "id": "r", "label": "r", "format": "decimal3" }
        ],
        "inputs": [
          {
            "id": "slopeSign",
            "label": "The slope b will be:",
            "type": "multiple-choice",
            "options": [
              { "id": "positive", "label": "Positive (+)" },
              { "id": "negative", "label": "Negative (âˆ’)" },
              { "id": "zero", "label": "Zero (0)" }
            ]
          }
        ]
      }
    },
    {
      "id": "ratio-check",
      "name": "Ratio Reasoning",
      "unlockedBy": { "gold": 2 },
      "description": "Conceptual check: when sáµ§ = sâ‚“, what happens?",
      "celebrationMessage": "ðŸ§  Ratio Reasoning Unlocked!",
      "layout": {
        "given": [
          { "id": "r", "label": "r", "format": "decimal3" },
          { "id": "sx", "label": "sâ‚“", "format": "decimal2" },
          { "id": "sy", "label": "sáµ§", "format": "decimal2" },
          { "id": "note", "label": "Notice", "value": "sâ‚“ = sáµ§" }
        ],
        "inputs": [
          {
            "id": "b",
            "label": "b = ",
            "type": "number",
            "step": "any",
            "placeholder": "What is b when sâ‚“ = sáµ§?",
            "width": "medium"
          },
          {
            "id": "insight",
            "label": "When sâ‚“ = sáµ§, b equals:",
            "type": "multiple-choice",
            "options": [
              { "id": "r", "label": "r (the correlation)" },
              { "id": "one", "label": "1" },
              { "id": "zero", "label": "0" },
              { "id": "sy", "label": "sáµ§" }
            ]
          }
        ]
      }
    }
  ],
  "grading": {
    "rubricFile": "grading-rules.js",
    "aiPromptFile": "ai-grader-prompt.txt",
    "scoring": {
      "scale": ["E", "P", "I"],
      "meanings": {
        "E": "Essentially Correct - within acceptable tolerance",
        "P": "Partially Correct - minor rounding/arithmetic error",
        "I": "Incorrect - significant error or wrong approach"
      }
    },
    "tolerances": {
      "tight": { "absolute": 0.01, "relative": 0.01 },
      "standard": { "absolute": 0.05, "relative": 0.02 },
      "loose": { "absolute": 0.1, "relative": 0.05 }
    },
    "composite": {
      "rule": "all-E-for-star",
      "starTiers": ["gold", "silver", "bronze", "tin"]
    }
  },
  "hints": {
    "perMode": {
      "find-b": {
        "formula": "<strong>Formula:</strong> b = r Â· (sáµ§ / sâ‚“)<br><br><strong>Steps:</strong><br>1. Divide sáµ§ by sâ‚“<br>2. Multiply the result by r<br><br><strong>Watch out:</strong> The sign of b matches the sign of r!",
        "example": "If r = 0.8, sáµ§ = 12, sâ‚“ = 4:<br>b = 0.8 Ã— (12 Ã· 4) = 0.8 Ã— 3 = 2.4"
      },
      "find-a": {
        "formula": "<strong>Formula:</strong> a = È³ âˆ’ b Â· xÌ„<br><br><strong>Steps:</strong><br>1. Multiply b by xÌ„<br>2. Subtract that product from È³<br><br><strong>Watch out:</strong> If b is negative, subtracting a negative makes it addition!",
        "example": "If È³ = 50, b = 3, xÌ„ = 10:<br>a = 50 âˆ’ (3 Ã— 10) = 50 âˆ’ 30 = 20"
      },
      "full-lsrl": {
        "formula": "<strong>Two-step process:</strong><br><br><strong>Step 1:</strong> Find b = r Â· (sáµ§ / sâ‚“)<br><strong>Step 2:</strong> Find a = È³ âˆ’ b Â· xÌ„<br><br>Then write: Å· = a + bx",
        "memoryTrick": "The LSRL always passes through the point (xÌ„, È³). That's why we use the means to find a!"
      },
      "std-dev": {
        "formula": "<strong>Formula:</strong> s = âˆš[Î£(xáµ¢ âˆ’ xÌ„)Â² / (n âˆ’ 1)]<br><br><strong>Steps:</strong><br>1. Find the mean xÌ„<br>2. Subtract xÌ„ from each value<br>3. Square each deviation<br>4. Sum the squares<br>5. Divide by (n âˆ’ 1), not n!<br>6. Take the square root",
        "whyN1": "We divide by (nâˆ’1) for the <em>sample</em> standard deviation. This gives us a better estimate of the population spread."
      },
      "sign-check": {
        "rule": "<strong>Key insight:</strong> The sign of the slope b is ALWAYS the same as the sign of r.<br><br>â€¢ Positive r â†’ Positive slope (line goes up)<br>â€¢ Negative r â†’ Negative slope (line goes down)<br>â€¢ r = 0 â†’ Slope = 0 (horizontal line)"
      },
      "ratio-check": {
        "insight": "<strong>When sâ‚“ = sáµ§:</strong><br><br>b = r Ã— (sáµ§ / sâ‚“) = r Ã— (sáµ§ / sáµ§) = r Ã— 1 = <strong>r</strong><br><br>So when the standard deviations are equal, the slope equals the correlation coefficient exactly!"
      }
    },
    "penalty": {
      "0": "gold",
      "1": "silver",
      "2": "bronze",
      "3": "tin"
    }
  },
  "progression": {
    "streaksPerMode": true,
    "tiers": [
      {
        "id": "find-b",
        "name": "Find Slope (b)",
        "unlockedBy": "default"
      },
      {
        "id": "find-a",
        "name": "Find Y-Intercept (a)",
        "unlockedBy": "default"
      },
      {
        "id": "sign-check",
        "name": "Quick Sign Check",
        "unlockedBy": "default"
      },
      {
        "id": "ratio-check",
        "name": "Ratio Reasoning",
        "unlockedBy": { "gold": 2 },
        "celebrationMessage": "ðŸ§  Ratio Reasoning Unlocked! You're seeing the deeper patterns."
      },
      {
        "id": "std-dev",
        "name": "Standard Deviation",
        "unlockedBy": { "gold": 3 },
        "celebrationMessage": "ðŸ“Š Standard Deviation Mode Unlocked! Time to measure spread."
      },
      {
        "id": "full-lsrl",
        "name": "Full LSRL Equation",
        "unlockedBy": { "gold": 5 },
        "celebrationMessage": "ðŸŽ‰ Full LSRL Mode Unlocked! Put it all together."
      }
    ]
  },
  "accessibility": {
    "keyboardNav": true,
    "screenReaderLabels": {
      "r": "correlation coefficient r",
      "sx": "standard deviation of x, s sub x",
      "sy": "standard deviation of y, s sub y",
      "xBar": "x bar, the mean of x",
      "yBar": "y bar, the mean of y",
      "b": "slope b",
      "a": "y-intercept a"
    }
  }
}
