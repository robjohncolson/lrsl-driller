{
  "meta": {
    "id": "lsrl-calculations",
    "name": "LSRL Calculations",
    "subject": "AP Statistics",
    "unit": "2",
    "lesson": "8",
    "skill": "Calculate slope (b), y-intercept (a), and standard deviation using formulas",
    "description": "Students practice computational skills for regression: b = r(sáµ§/sâ‚“), a = È³ - bxÌ„, and s = âˆš[Î£(x-xÌ„)Â²/(n-1)]"
  },
  "config": {
    "contextsFile": "contexts.json",
    "skills": ["slope-calculation", "intercept-calculation", "standard-deviation", "full-lsrl"]
  },
  "display": {
    "showGraph": false,
    "showFormulaReference": true,
    "formulaPanel": {
      "slope": "b = r Â· (sáµ§ / sâ‚“)",
      "intercept": "a = È³ âˆ’ b Â· xÌ„",
      "stdDev": "s = âˆš[Î£(xáµ¢ âˆ’ xÌ„)Â² / (n âˆ’ 1)]"
    },
    "infoPanel": [
      { "label": "Mode", "value": "{{modeName}}" },
      { "label": "Problem", "value": "{{problemNumber}} of {{totalProblems}}" }
    ]
  },
  "modes": [
    {
      "id": "find-b",
      "name": "Find Slope (b)",
      "unlockedBy": "default",
      "description": "Given r, sâ‚“, and sáµ§, calculate the slope b",
      "layout": {
        "given": [
          { "id": "r", "label": "r", "format": "decimal3" },
          { "id": "sx", "label": "sâ‚“", "format": "decimal2" },
          { "id": "sy", "label": "sáµ§", "format": "decimal2" }
        ],
        "inputs": [
          {
            "id": "b",
            "label": "b = ",
            "type": "number",
            "step": "any",
            "placeholder": "Calculate slope",
            "width": "medium"
          }
        ],
        "formulaHint": "b = r Â· (sáµ§ / sâ‚“)"
      }
    },
    {
      "id": "find-a",
      "name": "Find Y-Intercept (a)",
      "unlockedBy": "default",
      "description": "Given xÌ„, È³, and b, calculate the y-intercept a",
      "layout": {
        "given": [
          { "id": "xBar", "label": "xÌ„", "format": "decimal2" },
          { "id": "yBar", "label": "È³", "format": "decimal2" },
          { "id": "b", "label": "b", "format": "decimal3" }
        ],
        "inputs": [
          {
            "id": "a",
            "label": "a = ",
            "type": "number",
            "step": "any",
            "placeholder": "Calculate y-intercept",
            "width": "medium"
          }
        ],
        "formulaHint": "a = È³ âˆ’ b Â· xÌ„"
      }
    },
    {
      "id": "full-lsrl",
      "name": "Full LSRL Equation",
      "unlockedBy": { "gold": 5 },
      "description": "Given summary statistics, find both b and a",
      "celebrationMessage": "ðŸŽ‰ Full LSRL Mode Unlocked! You've mastered the individual formulas.",
      "layout": {
        "given": [
          { "id": "r", "label": "r", "format": "decimal3" },
          { "id": "sx", "label": "sâ‚“", "format": "decimal2" },
          { "id": "sy", "label": "sáµ§", "format": "decimal2" },
          { "id": "xBar", "label": "xÌ„", "format": "decimal2" },
          { "id": "yBar", "label": "È³", "format": "decimal2" }
        ],
        "inputs": [
          {
            "id": "b",
            "label": "b = ",
            "type": "number",
            "step": "any",
            "placeholder": "Calculate slope first",
            "width": "medium",
            "order": 1
          },
          {
            "id": "a",
            "label": "a = ",
            "type": "number",
            "step": "any",
            "placeholder": "Then calculate y-intercept",
            "width": "medium",
            "order": 2
          }
        ],
        "equationPreview": {
          "template": "Å· = {{a}} + {{b}}x",
          "showWhenComplete": true
        }
      }
    },
    {
      "id": "std-dev",
      "name": "Standard Deviation",
      "unlockedBy": { "gold": 3 },
      "description": "Given a small dataset, calculate the mean and sample standard deviation",
      "celebrationMessage": "ðŸ“Š Standard Deviation Mode Unlocked!",
      "layout": {
        "given": [
          { "id": "dataset", "label": "Data", "format": "array", "display": "inline" },
          { "id": "n", "label": "n", "format": "integer" }
        ],
        "inputs": [
          {
            "id": "mean",
            "label": "xÌ„ = ",
            "type": "number",
            "step": "any",
            "placeholder": "Calculate mean first",
            "width": "medium",
            "order": 1
          },
          {
            "id": "stdDev",
            "label": "s = ",
            "type": "number",
            "step": "any",
            "placeholder": "Then calculate std dev",
            "width": "medium",
            "order": 2
          }
        ],
        "showWorkTable": {
          "enabled": true,
          "columns": ["xáµ¢", "(xáµ¢ âˆ’ xÌ„)", "(xáµ¢ âˆ’ xÌ„)Â²"],
          "helperRow": "Î£(xáµ¢ âˆ’ xÌ„)Â² = ?"
        }
      }
    },
    {
      "id": "sign-check",
      "name": "Quick Sign Check",
      "unlockedBy": "default",
      "description": "Conceptual warm-up: predict the sign of the slope",
      "layout": {
        "given": [
          { "id": "r", "label": "r", "format": "decimal3" }
        ],
        "inputs": [
          {
            "id": "slopeSign",
            "label": "The slope b will be:",
            "type": "multiple-choice",
            "options": [
              { "id": "positive", "label": "Positive (+)" },
              { "id": "negative", "label": "Negative (âˆ’)" },
              { "id": "zero", "label": "Zero (0)" }
            ]
          }
        ]
      }
    },
    {
      "id": "ratio-check",
      "name": "Ratio Reasoning",
      "unlockedBy": { "gold": 2 },
      "description": "Conceptual check: when sáµ§ = sâ‚“, what happens?",
      "celebrationMessage": "ðŸ§  Ratio Reasoning Unlocked!",
      "layout": {
        "given": [
          { "id": "r", "label": "r", "format": "decimal3" },
          { "id": "sx", "label": "sâ‚“", "format": "decimal2" },
          { "id": "sy", "label": "sáµ§", "format": "decimal2" },
          { "id": "note", "label": "Notice", "value": "sâ‚“ = sáµ§" }
        ],
        "inputs": [
          {
            "id": "b",
            "label": "b = ",
            "type": "number",
            "step": "any",
            "placeholder": "What is b when sâ‚“ = sáµ§?",
            "width": "medium"
          },
          {
            "id": "insight",
            "label": "When sâ‚“ = sáµ§, b equals:",
            "type": "multiple-choice",
            "options": [
              { "id": "r", "label": "r (the correlation)" },
              { "id": "one", "label": "1" },
              { "id": "zero", "label": "0" },
              { "id": "sy", "label": "sáµ§" }
            ]
          }
        ]
      }
    }
  ],
  "grading": {
    "rubricFile": "grading-rules.js",
    "aiPromptFile": "ai-grader-prompt.txt",
    "scoring": {
      "scale": ["E", "P", "I"],
      "meanings": {
        "E": "Essentially Correct - within acceptable tolerance",
        "P": "Partially Correct - minor rounding/arithmetic error",
        "I": "Incorrect - significant error or wrong approach"
      }
    },
    "tolerances": {
      "tight": { "absolute": 0.01, "relative": 0.01 },
      "standard": { "absolute": 0.05, "relative": 0.02 },
      "loose": { "absolute": 0.1, "relative": 0.05 }
    },
    "composite": {
      "rule": "all-E-for-star",
      "starTiers": ["gold", "silver", "bronze", "tin"]
    }
  },
  "hints": {
    "perField": {
      "b": "<strong>Formula:</strong> b = r Â· (sáµ§ / sâ‚“)<br><br><strong>Steps:</strong><br>1. First, divide sáµ§ by sâ‚“ to get the ratio<br>2. Then multiply that ratio by r<br><br><strong>Tip:</strong> The sign of b always matches the sign of r!",
      "a": "<strong>Formula:</strong> a = È³ âˆ’ b Â· xÌ„<br><br><strong>Steps:</strong><br>1. First, multiply b by xÌ„<br>2. Then subtract that product from È³<br><br><strong>Watch out:</strong> If b is negative, subtracting a negative means you add!",
      "mean": "<strong>Formula:</strong> xÌ„ = Î£xáµ¢ / n<br><br><strong>Steps:</strong><br>1. Add up all the values<br>2. Divide by the count (n)<br><br><strong>Tip:</strong> The mean is the \"balance point\" of the data.",
      "stdDev": "<strong>Formula:</strong> s = âˆš[Î£(xáµ¢ âˆ’ xÌ„)Â² / (n âˆ’ 1)]<br><br><strong>Steps:</strong><br>1. Find each deviation: (value âˆ’ mean)<br>2. Square each deviation<br>3. Sum all squared deviations<br>4. Divide by (n âˆ’ 1), <em>not n</em>!<br>5. Take the square root<br><br><strong>Remember:</strong> We use (nâˆ’1) for sample standard deviation.",
      "slopeSign": "<strong>Key relationship:</strong><br><br>The sign of slope b <em>always</em> matches the sign of r.<br><br>Think about it: sâ‚“ and sáµ§ are always positive (they're standard deviations), so the only thing that determines the sign of b is r!",
      "insight": "<strong>Think about the formula:</strong><br><br>b = r Ã— (sáµ§ / sâ‚“)<br><br>What happens to (sáµ§ / sâ‚“) when sáµ§ equals sâ‚“?<br><br>Any number divided by itself equals..."
    },
    "penalty": {
      "0": "gold",
      "1": "silver",
      "2": "bronze",
      "3": "tin"
    }
  },
  "progression": {
    "streaksPerMode": true,
    "tiers": [
      {
        "id": "find-b",
        "name": "Find Slope (b)",
        "unlockedBy": "default"
      },
      {
        "id": "find-a",
        "name": "Find Y-Intercept (a)",
        "unlockedBy": "default"
      },
      {
        "id": "sign-check",
        "name": "Quick Sign Check",
        "unlockedBy": "default"
      },
      {
        "id": "ratio-check",
        "name": "Ratio Reasoning",
        "unlockedBy": { "gold": 2 },
        "celebrationMessage": "ðŸ§  Ratio Reasoning Unlocked! You're seeing the deeper patterns."
      },
      {
        "id": "std-dev",
        "name": "Standard Deviation",
        "unlockedBy": { "gold": 3 },
        "celebrationMessage": "ðŸ“Š Standard Deviation Mode Unlocked! Time to measure spread."
      },
      {
        "id": "full-lsrl",
        "name": "Full LSRL Equation",
        "unlockedBy": { "gold": 5 },
        "celebrationMessage": "ðŸŽ‰ Full LSRL Mode Unlocked! Put it all together."
      }
    ]
  },
  "accessibility": {
    "keyboardNav": true,
    "screenReaderLabels": {
      "r": "correlation coefficient r",
      "sx": "standard deviation of x, s sub x",
      "sy": "standard deviation of y, s sub y",
      "xBar": "x bar, the mean of x",
      "yBar": "y bar, the mean of y",
      "b": "slope b",
      "a": "y-intercept a"
    }
  }
}
