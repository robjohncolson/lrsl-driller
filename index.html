<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Driller Platform - Complete Setup Guide for Teachers</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
      line-height: 1.6;
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
      color: #333;
    }
    h1 {
      color: #7c3aed;
      border-bottom: 3px solid #7c3aed;
      padding-bottom: 10px;
    }
    h2 {
      color: #5b21b6;
      margin-top: 40px;
      padding: 10px 15px;
      background: #ede9fe;
      border-radius: 8px;
    }
    h3 {
      color: #6d28d9;
      margin-top: 25px;
    }
    .step-number {
      display: inline-block;
      width: 32px;
      height: 32px;
      background: #7c3aed;
      color: white;
      border-radius: 50%;
      text-align: center;
      line-height: 32px;
      font-weight: bold;
      margin-right: 10px;
    }
    .card {
      background: white;
      border-radius: 12px;
      padding: 20px;
      margin: 15px 0;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .resource-link {
      display: inline-block;
      background: #7c3aed;
      color: white;
      padding: 10px 20px;
      border-radius: 8px;
      text-decoration: none;
      margin: 5px 5px 5px 0;
      transition: background 0.2s;
    }
    .resource-link:hover {
      background: #5b21b6;
    }
    .resource-link.secondary {
      background: #6b7280;
    }
    .resource-link.secondary:hover {
      background: #4b5563;
    }
    code {
      background: #1f2937;
      color: #10b981;
      padding: 2px 8px;
      border-radius: 4px;
      font-family: 'Consolas', 'Monaco', monospace;
    }
    pre {
      background: #1f2937;
      color: #e5e7eb;
      padding: 15px;
      border-radius: 8px;
      overflow-x: auto;
      position: relative;
    }
    pre code {
      background: none;
      padding: 0;
      color: #10b981;
    }
    .warning {
      background: #fef3c7;
      border-left: 4px solid #f59e0b;
      padding: 15px;
      margin: 15px 0;
      border-radius: 0 8px 8px 0;
    }
    .success {
      background: #d1fae5;
      border-left: 4px solid #10b981;
      padding: 15px;
      margin: 15px 0;
      border-radius: 0 8px 8px 0;
    }
    .info {
      background: #dbeafe;
      border-left: 4px solid #3b82f6;
      padding: 15px;
      margin: 15px 0;
      border-radius: 0 8px 8px 0;
    }
    .checklist {
      list-style: none;
      padding: 0;
    }
    .checklist li {
      padding: 8px 0;
      padding-left: 30px;
      position: relative;
    }
    .checklist li::before {
      content: "☐";
      position: absolute;
      left: 0;
      font-size: 1.2em;
    }
    .time-estimate {
      display: inline-block;
      background: #e0e7ff;
      color: #4338ca;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.85em;
      margin-left: 10px;
    }
    .toc {
      background: white;
      padding: 20px;
      border-radius: 12px;
      margin: 20px 0;
    }
    .toc ul {
      list-style: none;
      padding-left: 0;
    }
    .toc li {
      padding: 5px 0;
    }
    .toc a {
      color: #7c3aed;
      text-decoration: none;
    }
    .toc a:hover {
      text-decoration: underline;
    }
    .video-placeholder {
      background: #1f2937;
      color: white;
      padding: 40px;
      text-align: center;
      border-radius: 8px;
      margin: 15px 0;
    }
    .video-placeholder a {
      color: #60a5fa;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 15px 0;
    }
    th {
      background: #f3f4f6;
      padding: 10px;
      text-align: left;
      border: 1px solid #d1d5db;
    }
    td {
      padding: 10px;
      border: 1px solid #d1d5db;
    }
    .copy-btn {
      position: absolute;
      top: 8px;
      right: 8px;
      background: #4b5563;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.8em;
    }
    .copy-btn:hover {
      background: #374151;
    }
    footer {
      margin-top: 60px;
      padding-top: 20px;
      border-top: 1px solid #d1d5db;
      text-align: center;
      color: #6b7280;
    }
    .highlight-box {
      background: linear-gradient(135deg, #7c3aed 0%, #5b21b6 100%);
      color: white;
      padding: 20px;
      border-radius: 12px;
      margin: 20px 0;
    }
    .highlight-box h3 {
      color: white;
      margin-top: 0;
    }
    ol.steps > li {
      margin-bottom: 15px;
    }
  </style>
</head>
<body>

<h1>Driller Platform - Complete Setup Guide</h1>

<div class="highlight-box">
  <h3>100% Cloud-Based Setup</h3>
  <p>This guide uses only browser-based tools. No software installation required - works on locked-down school laptops and Chromebooks!</p>
</div>

<div class="info">
  <strong>Total Time:</strong> 30-45 minutes<br>
  <strong>Difficulty:</strong> Beginner-friendly<br>
  <strong>Cost:</strong> Free (all services have generous free tiers)
</div>

<div class="toc">
  <h3>Table of Contents</h3>
  <ul>
    <li><a href="#overview">Overview: What We're Setting Up</a></li>
    <li><a href="#part1">Part 1: Create Your Accounts (5 min)</a></li>
    <li><a href="#part2">Part 2: Fork the Repository on GitHub (2 min)</a></li>
    <li><a href="#part3">Part 3: Set Up Supabase Database (10 min)</a></li>
    <li><a href="#part4">Part 4: Deploy Backend on Railway (8 min)</a></li>
    <li><a href="#part5">Part 5: Deploy Frontend on Vercel (5 min)</a></li>
    <li><a href="#part6">Part 6: Test Your Deployment (3 min)</a></li>
    <li><a href="#part7">Part 7: Set Up AI Grading Keys (Optional, 5 min)</a></li>
    <li><a href="#part8">Part 8: Edit Code with Project IDX (For Creating Cartridges)</a></li>
    <li><a href="#troubleshooting">Troubleshooting</a></li>
  </ul>
</div>

<!-- ==================== OVERVIEW ==================== -->
<h2 id="overview">Overview: What We're Setting Up</h2>

<div class="card">
  <p>The Driller platform has three parts that work together:</p>

  <table>
    <tr>
      <th>Component</th>
      <th>Service</th>
      <th>Purpose</th>
    </tr>
    <tr>
      <td><strong>Database</strong></td>
      <td>Supabase</td>
      <td>Stores student progress, scores, and teacher review queue</td>
    </tr>
    <tr>
      <td><strong>Backend Server</strong></td>
      <td>Railway</td>
      <td>Handles AI grading, saves data, manages WebSocket connections</td>
    </tr>
    <tr>
      <td><strong>Frontend Website</strong></td>
      <td>Vercel</td>
      <td>The student-facing app they interact with</td>
    </tr>
  </table>

  <p style="margin-top: 15px;"><strong>Code Storage:</strong> GitHub holds all the code. When you push changes, Railway and Vercel automatically redeploy.</p>

  <div style="text-align: center; margin: 20px 0; padding: 20px; background: #f9fafb; border-radius: 8px;">
    <pre style="background: none; color: #333; text-align: left; display: inline-block;">
┌──────────────────────────────────────────────────────────────┐
│                         GitHub                                │
│                    (Your Code Repository)                     │
└──────────────────────────────────────────────────────────────┘
              │                              │
              ▼                              ▼
┌─────────────────────────┐    ┌─────────────────────────┐
│        Railway          │    │        Vercel           │
│    (Backend Server)     │    │   (Frontend Website)    │
│                         │    │                         │
│  • AI Grading           │◄───│  • Student Interface    │
│  • Save/Load Progress   │    │  • Problems & Grading   │
│  • Teacher Review       │    │  • Leaderboards         │
└─────────────────────────┘    └─────────────────────────┘
              │
              ▼
┌─────────────────────────┐
│       Supabase          │
│      (Database)         │
│                         │
│  • Student Progress     │
│  • Star Counts          │
│  • Time Tracking        │
└─────────────────────────┘
    </pre>
  </div>
</div>

<!-- ==================== PART 1 ==================== -->
<h2 id="part1"><span class="step-number">1</span> Create Your Accounts <span class="time-estimate">5 min</span></h2>

<div class="info">
  <strong>Video walkthrough:</strong> <a href="https://youtu.be/fwL0h1vU8ws" target="_blank">Watch Video 1</a> - covers Parts 1-2
</div>

<div class="card">
  <p>Create accounts on these 4 free services. <strong>Start with GitHub</strong>, then use "Sign in with GitHub" for the others (easier!).</p>

  <h3>Step 1: Create GitHub Account</h3>
  <a href="https://github.com/signup" target="_blank" class="resource-link">Create GitHub Account</a>
  <p>GitHub stores your code and connects to the other services.</p>

  <h3>Step 2: Create Supabase Account</h3>
  <a href="https://supabase.com/dashboard" target="_blank" class="resource-link">Create Supabase Account</a>
  <p>Click <strong>"Continue with GitHub"</strong> to link accounts.</p>

  <h3>Step 3: Create Railway Account</h3>
  <a href="https://railway.app/" target="_blank" class="resource-link">Create Railway Account</a>
  <p>Click <strong>"Login with GitHub"</strong> to link accounts.</p>

  <h3>Step 4: Create Vercel Account</h3>
  <a href="https://vercel.com/signup" target="_blank" class="resource-link">Create Vercel Account</a>
  <p>Click <strong>"Continue with GitHub"</strong> to link accounts.</p>

  <div class="success">
    <strong>Checkpoint:</strong> You should now have 4 accounts, all linked to your GitHub login.
  </div>
</div>

<!-- ==================== PART 2 ==================== -->
<h2 id="part2"><span class="step-number">2</span> Fork the Repository on GitHub <span class="time-estimate">2 min</span></h2>

<div class="card">
  <p>"Forking" creates your own copy of the code that you control.</p>

  <ol class="steps">
    <li>
      <strong>Open the original repository:</strong><br>
      <a href="https://github.com/robjohncolson/lrsl-driller" target="_blank" class="resource-link">Open lrsl-driller Repository</a>
    </li>
    <li>
      <strong>Click the "Fork" button</strong> (top-right corner of the page)
    </li>
    <li>
      <strong>Keep defaults and click "Create fork"</strong>
    </li>
    <li>
      <strong>Wait a few seconds</strong> - you'll be redirected to YOUR copy at:<br>
      <code>github.com/YOUR-USERNAME/lrsl-driller</code>
    </li>
  </ol>

  <div class="success">
    <strong>Checkpoint:</strong> You now have your own copy of the code at <code>github.com/YOUR-USERNAME/lrsl-driller</code>
  </div>
</div>

<!-- ==================== PART 3 ==================== -->
<h2 id="part3"><span class="step-number">3</span> Set Up Supabase Database <span class="time-estimate">10 min</span></h2>

<div class="info">
  <strong>Video walkthrough:</strong> <a href="https://youtu.be/zg3pIdLs4us" target="_blank">Watch Video 2</a> - covers Part 3
</div>

<div class="card">
  <h3>Step 1: Create a New Project</h3>
  <ol class="steps">
    <li>Go to <a href="https://supabase.com/dashboard" target="_blank">supabase.com/dashboard</a></li>
    <li>Click <strong>"New Project"</strong></li>
    <li>Select your organization (or create one)</li>
    <li>Fill in:
      <ul>
        <li><strong>Project name:</strong> <code>driller</code></li>
        <li><strong>Database Password:</strong> Click "Generate" for a strong password</li>
        <li><strong>Region:</strong> Choose the closest to you</li>
      </ul>
    </li>
    <li>Click <strong>"Create new project"</strong></li>
    <li>Wait 2-3 minutes for setup to complete</li>
  </ol>

  <div class="info">
    <strong>Note:</strong> You don't need to save the database password - we'll use the API key method instead (easier!).
  </div>
</div>

<div class="card">
  <h3>Step 2: Create Database Tables</h3>
  <ol class="steps">
    <li>In your Supabase project, click <strong>"SQL Editor"</strong> in the left sidebar</li>
    <li>Click <strong>"New query"</strong></li>
    <li>Copy this entire SQL script and paste it:</li>
  </ol>

  <pre><code>-- =============================================
-- DRILLER PLATFORM DATABASE SCHEMA
-- Copy this entire block and run it in Supabase
-- =============================================

-- Users table
CREATE TABLE IF NOT EXISTS users (
  id BIGSERIAL PRIMARY KEY,
  username TEXT UNIQUE NOT NULL,
  real_name TEXT,
  role TEXT DEFAULT 'student',
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Progress table
CREATE TABLE IF NOT EXISTS progress (
  id BIGSERIAL PRIMARY KEY,
  username TEXT NOT NULL,
  cartridge_id TEXT NOT NULL,
  mode_id TEXT NOT NULL,
  streaks JSONB DEFAULT '{}',
  star_counts JSONB DEFAULT '{"gold":0,"silver":0,"bronze":0,"tin":0}',
  unlocked_tiers JSONB DEFAULT '[]',
  total_problems INTEGER DEFAULT 0,
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(username, cartridge_id)
);

-- Leaderboard table
CREATE TABLE IF NOT EXISTS leaderboard (
  id BIGSERIAL PRIMARY KEY,
  username TEXT NOT NULL,
  cartridge_id TEXT NOT NULL,
  gold INTEGER DEFAULT 0,
  silver INTEGER DEFAULT 0,
  bronze INTEGER DEFAULT 0,
  tin INTEGER DEFAULT 0,
  total_problems INTEGER DEFAULT 0,
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(username, cartridge_id)
);

-- Teacher review queue
CREATE TABLE IF NOT EXISTS review_queue (
  id BIGSERIAL PRIMARY KEY,
  username TEXT NOT NULL,
  cartridge_id TEXT NOT NULL,
  mode_id TEXT NOT NULL,
  problem_context JSONB,
  answers JSONB,
  requested_at TIMESTAMPTZ DEFAULT NOW(),
  status TEXT DEFAULT 'pending',
  teacher_grades JSONB,
  reviewed_at TIMESTAMPTZ,
  reviewed_by TEXT
);

-- Time tracking: sessions
CREATE TABLE IF NOT EXISTS time_sessions (
  id BIGSERIAL PRIMARY KEY,
  session_id TEXT UNIQUE NOT NULL,
  username TEXT NOT NULL,
  session_start TIMESTAMPTZ NOT NULL,
  active_time_ms BIGINT DEFAULT 0,
  total_time_ms BIGINT DEFAULT 0,
  last_sync TIMESTAMPTZ DEFAULT NOW(),
  is_complete BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Time tracking: problems
CREATE TABLE IF NOT EXISTS time_problems (
  id BIGSERIAL PRIMARY KEY,
  session_id TEXT NOT NULL,
  username TEXT NOT NULL,
  problem_id TEXT,
  cartridge_id TEXT,
  mode_id TEXT,
  active_time_ms BIGINT DEFAULT 0,
  total_time_ms BIGINT DEFAULT 0,
  completed BOOLEAN DEFAULT FALSE,
  result JSONB,
  completed_at TIMESTAMPTZ DEFAULT NOW()
);

-- Create indexes for faster queries
CREATE INDEX IF NOT EXISTS idx_progress_username ON progress(username);
CREATE INDEX IF NOT EXISTS idx_leaderboard_cartridge ON leaderboard(cartridge_id);
CREATE INDEX IF NOT EXISTS idx_review_queue_status ON review_queue(status);
CREATE INDEX IF NOT EXISTS idx_time_sessions_username ON time_sessions(username);
CREATE INDEX IF NOT EXISTS idx_time_problems_username ON time_problems(username);

-- Enable Row Level Security
ALTER TABLE users ENABLE ROW LEVEL SECURITY;
ALTER TABLE progress ENABLE ROW LEVEL SECURITY;
ALTER TABLE leaderboard ENABLE ROW LEVEL SECURITY;
ALTER TABLE review_queue ENABLE ROW LEVEL SECURITY;
ALTER TABLE time_sessions ENABLE ROW LEVEL SECURITY;
ALTER TABLE time_problems ENABLE ROW LEVEL SECURITY;

-- Allow all operations (for simplicity)
CREATE POLICY "Allow all on users" ON users FOR ALL USING (true);
CREATE POLICY "Allow all on progress" ON progress FOR ALL USING (true);
CREATE POLICY "Allow all on leaderboard" ON leaderboard FOR ALL USING (true);
CREATE POLICY "Allow all on review_queue" ON review_queue FOR ALL USING (true);
CREATE POLICY "Allow all on time_sessions" ON time_sessions FOR ALL USING (true);
CREATE POLICY "Allow all on time_problems" ON time_problems FOR ALL USING (true);</code></pre>

  <ol class="steps" start="4">
    <li>Click the <strong>"Run"</strong> button (or press Ctrl+Enter)</li>
    <li>You should see <strong>"Success. No rows returned"</strong> - this is correct!</li>
  </ol>

  <div class="success">
    <strong>Checkpoint:</strong> Your database tables are now created.
  </div>
</div>

<div class="card">
  <h3>Step 3: Get Your Project URL and API Key</h3>
  <ol class="steps">
    <li>Click <strong>"Project Settings"</strong> (gear icon in bottom-left)</li>
    <li>Click <strong>"API"</strong> in the settings menu (under Configuration)</li>
    <li>Find and copy these two values:
      <ul>
        <li><strong>Project URL</strong> - looks like: <code>https://abcdefghijk.supabase.co</code></li>
        <li><strong>anon public</strong> key (under "Project API keys") - a long string starting with <code>eyJ...</code></li>
      </ul>
    </li>
  </ol>

  <div class="warning">
    <strong>Save both values!</strong> You'll need them for Railway configuration in the next step.
  </div>
</div>

<!-- ==================== PART 4 ==================== -->
<h2 id="part4"><span class="step-number">4</span> Deploy Backend on Railway <span class="time-estimate">8 min</span></h2>

<div class="info">
  <strong>Video walkthrough:</strong> <a href="https://youtu.be/K_DQSPn9rMc" target="_blank">Watch Video 3</a> - covers Part 4
</div>

<div class="warning">
  <strong>Note on Railway pricing:</strong> Railway offers a free trial ($5 credit / 30 days). After the trial, the backend server costs approximately $5/month. This is currently the only paid component of the setup.
</div>

<div class="card">
  <h3>Step 1: Create Railway Project from GitHub</h3>
  <ol class="steps">
    <li>Go to <a href="https://railway.app/new" target="_blank">railway.app/new</a></li>
    <li>Click <strong>"Deploy from GitHub repo"</strong></li>
    <li>If prompted, authorize Railway to access your GitHub</li>
    <li>Find and select your <strong>lrsl-driller</strong> repository</li>
    <li>Click <strong>"Deploy Now"</strong></li>
  </ol>
  <p>Railway will start building - this takes about 1 minute. It will likely fail the first time - that's okay! We need to configure it.</p>
</div>

<div class="card">
  <h3>Step 2: Configure the Server</h3>
  <ol class="steps">
    <li>Click on your service (the purple box with your repo name)</li>
    <li>Go to the <strong>"Settings"</strong> tab</li>
    <li>Scroll to <strong>"Source"</strong> section</li>
    <li>Set <strong>"Root Directory"</strong> to: <code>railway-server</code></li>
    <li>Scroll to <strong>"Deploy"</strong> section</li>
    <li>Set <strong>"Custom Start Command"</strong> to: <code>node server.js</code></li>
  </ol>
</div>

<div class="card">
  <h3>Step 3: Add Environment Variables</h3>
  <ol class="steps">
    <li>Go to the <strong>"Variables"</strong> tab</li>
    <li>Click <strong>"+ New Variable"</strong></li>
    <li>Add these two variables:</li>
  </ol>

  <table>
    <tr>
      <th>Variable Name</th>
      <th>Value</th>
    </tr>
    <tr>
      <td><code>SUPABASE_URL</code></td>
      <td>Your Project URL from Part 3 (e.g., <code>https://abcdefghijk.supabase.co</code>)</td>
    </tr>
    <tr>
      <td><code>SUPABASE_ANON_KEY</code></td>
      <td>Your anon public key from Part 3 (starts with <code>eyJ...</code>)</td>
    </tr>
  </table>

  <p>Railway will automatically redeploy after adding variables.</p>
</div>

<div class="card">
  <h3>Step 4: Generate a Public URL</h3>
  <ol class="steps">
    <li>Go to the <strong>"Settings"</strong> tab</li>
    <li>Scroll to <strong>"Networking"</strong> section</li>
    <li>Click <strong>"Generate Domain"</strong></li>
    <li>Copy your new URL (looks like: <code>https://lrsl-driller-production-xxxx.up.railway.app</code>)</li>
  </ol>

  <div class="success">
    <strong>Save this Railway URL!</strong> You'll need it for Vercel configuration.
  </div>
</div>

<!-- ==================== PART 5 ==================== -->
<h2 id="part5"><span class="step-number">5</span> Deploy Frontend on Vercel <span class="time-estimate">5 min</span></h2>

<div class="info">
  <strong>Video walkthrough:</strong> <a href="https://youtu.be/Xt8FyHxEA00" target="_blank">Watch Video 4</a> - covers Parts 5-6
</div>

<div class="card">
  <h3>Step 1: Import Project</h3>
  <ol class="steps">
    <li>Go to <a href="https://vercel.com/new" target="_blank">vercel.com/new</a></li>
    <li>Find your <strong>lrsl-driller</strong> repository</li>
    <li>Click <strong>"Import"</strong></li>
  </ol>
</div>

<div class="card">
  <h3>Step 2: Configure Environment Variable</h3>
  <p>Before deploying, expand <strong>"Environment Variables"</strong> and add:</p>

  <table>
    <tr>
      <th>Name</th>
      <th>Value</th>
    </tr>
    <tr>
      <td><code>VITE_API_URL</code></td>
      <td>Your Railway URL from Part 4 (e.g., <code>https://lrsl-driller-production-xxxx.up.railway.app</code>)</td>
    </tr>
  </table>

  <ol class="steps" start="3">
    <li>Click <strong>"Deploy"</strong></li>
    <li>Wait 1-2 minutes for the build to complete</li>
  </ol>

  <div class="success">
    <strong>Checkpoint:</strong> Vercel will show you your live URL (e.g., <code>https://lrsl-driller.vercel.app</code>)
  </div>
</div>

<!-- ==================== PART 6 ==================== -->
<h2 id="part6"><span class="step-number">6</span> Test Your Deployment <span class="time-estimate">3 min</span></h2>

<div class="card">
  <h3>Verify Everything Works</h3>
  <ol class="steps">
    <li>Open your Vercel URL in a new tab</li>
    <li>You should see the Driller homepage with cartridge options</li>
    <li>Click on <strong>"LSRL Interpretation"</strong> or any cartridge</li>
    <li>Enter a test username (e.g., "testuser")</li>
    <li>Try answering a problem and clicking <strong>"Grade"</strong></li>
    <li>Refresh the page - your progress should be saved!</li>
  </ol>

  <div class="success">
    <strong>Congratulations!</strong> Your Driller platform is now live and working!
  </div>

  <h3>Quick Test Checklist</h3>
  <ul class="checklist">
    <li>Page loads without errors</li>
    <li>Can enter username and start problems</li>
    <li>Grading shows feedback (E/P/I)</li>
    <li>Stars and streaks update</li>
    <li>Progress persists after page refresh</li>
  </ul>
</div>

<!-- ==================== PART 7 ==================== -->
<h2 id="part7"><span class="step-number">7</span> Set Up AI Grading Keys (Optional) <span class="time-estimate">5 min</span></h2>

<div class="info">
  <strong>Video walkthrough:</strong> <a href="https://youtu.be/m9lBJNKxZnc" target="_blank">Watch Video 5</a> - covers Part 7
</div>

<div class="card">
  <p>AI grading provides intelligent feedback on free-response answers. Without it, the app uses keyword matching (still works, just less sophisticated).</p>

  <h3>Get a Google Gemini API Key</h3>
  <ol class="steps">
    <li>Go to <a href="https://aistudio.google.com/app/apikey" target="_blank">Google AI Studio</a></li>
    <li>Sign in with your Google account</li>
    <li>Click <strong>"Create API Key"</strong></li>
    <li>Copy the key that appears</li>
  </ol>

  <a href="https://aistudio.google.com/app/apikey" target="_blank" class="resource-link">Get Gemini API Key</a>

  <h3>Get a Groq API Key (Backup)</h3>
  <ol class="steps">
    <li>Go to <a href="https://console.groq.com/" target="_blank">Groq Console</a></li>
    <li>Create an account</li>
    <li>Navigate to <strong>"API Keys"</strong></li>
    <li>Create and copy a new key</li>
  </ol>

  <a href="https://console.groq.com/" target="_blank" class="resource-link">Get Groq API Key</a>
</div>

<div class="card">
  <h3>Add API Keys to Railway</h3>
  <ol class="steps">
    <li>Go back to your <a href="https://railway.app/dashboard" target="_blank">Railway dashboard</a></li>
    <li>Click on your project, then your service</li>
    <li>Go to the <strong>"Variables"</strong> tab</li>
    <li>Add these new variables:</li>
  </ol>

  <table>
    <tr>
      <th>Variable Name</th>
      <th>Value</th>
    </tr>
    <tr>
      <td><code>GEMINI_API_KEYS</code></td>
      <td>Your Gemini API key</td>
    </tr>
    <tr>
      <td><code>GROQ_API_KEYS</code></td>
      <td>Your Groq API key</td>
    </tr>
  </table>

  <div class="info">
    <strong>Multiple keys:</strong> You can add multiple keys separated by commas for automatic rotation when rate limits are hit:<br>
    <code>key1,key2,key3</code>
  </div>
</div>

<!-- ==================== PART 8 ==================== -->
<h2 id="part8"><span class="step-number">8</span> Edit Code with Project IDX <span class="time-estimate">Setup: 5 min</span></h2>

<div class="info">
  <strong>Video walkthrough:</strong> <a href="https://youtu.be/fH-5rgCg2Zg" target="_blank">Watch Video 6</a> - covers Part 8
</div>

<div class="card">
  <p>When you're ready to create your own cartridges or customize the app, use <strong>Project IDX</strong> - Google's free cloud IDE.</p>

  <h3>Open Your Repository in Project IDX</h3>
  <ol class="steps">
    <li>Go to <a href="https://idx.google.com/" target="_blank">idx.google.com</a></li>
    <li>Click <strong>"Get started"</strong> and sign in with Google</li>
    <li>Click <strong>"Import a repo"</strong></li>
    <li>Paste YOUR forked repository URL:<br>
      <code>https://github.com/YOUR-USERNAME/lrsl-driller</code>
    </li>
    <li>Click <strong>"Import"</strong></li>
    <li>Wait 2-3 minutes for the environment to build</li>
  </ol>

  <a href="https://idx.google.com/" target="_blank" class="resource-link">Open Project IDX</a>

  <div class="info">
    <strong>Why Project IDX?</strong>
    <ul>
      <li>Runs entirely in your browser - nothing to install</li>
      <li>Works on Chromebooks and locked-down school computers</li>
      <li>Has Git built in - push changes directly to GitHub</li>
      <li>Free with your Google account</li>
    </ul>
  </div>
</div>

<div class="card">
  <h3>Making Changes and Deploying</h3>
  <p>When you edit files in Project IDX and want to deploy:</p>

  <ol class="steps">
    <li>Make your changes in the editor</li>
    <li>Open the <strong>Terminal</strong> (View → Terminal or Ctrl+`)</li>
    <li>Run these commands:</li>
  </ol>

  <pre><code>git add .
git commit -m "Description of your changes"
git push</code></pre>

  <p><strong>That's it!</strong> Railway and Vercel will automatically detect the push and redeploy within 1-2 minutes.</p>

  <div class="success">
    <strong>Automatic deployments:</strong> Every time you <code>git push</code>, both Railway and Vercel will rebuild and deploy your changes.
  </div>
</div>

<div class="card">
  <h3>Creating Your Own Cartridge</h3>
  <p>See the <strong>CARTRIDGE-DEVELOPMENT-GUIDE.md</strong> file in your repository for detailed instructions on creating lessons.</p>

  <p>Quick summary - create a folder in <code>cartridges/</code> with these 4 files:</p>
  <ul>
    <li><code>manifest.json</code> - Defines inputs, modes, hints</li>
    <li><code>generator.js</code> - Generates random problems</li>
    <li><code>grading-rules.js</code> - Scores student answers</li>
    <li><code>ai-grader-prompt.txt</code> - (Optional) AI grading instructions</li>
  </ul>
</div>

<!-- ==================== TROUBLESHOOTING ==================== -->
<h2 id="troubleshooting">Troubleshooting</h2>

<div class="card">
  <h3>"Failed to fetch" or Network Errors</h3>
  <ul>
    <li>Check Railway dashboard - is your service running (green status)?</li>
    <li>Verify the <code>VITE_API_URL</code> in Vercel matches your Railway URL exactly</li>
    <li>Make sure the URL starts with <code>https://</code></li>
    <li>Try redeploying on Vercel: Deployments → ... → Redeploy</li>
  </ul>
</div>

<div class="card">
  <h3>"Database connection failed" in Railway Logs</h3>
  <ul>
    <li>Double-check <code>SUPABASE_URL</code> and <code>SUPABASE_ANON_KEY</code> in Railway variables</li>
    <li>Ensure <code>SUPABASE_URL</code> is the Project URL (e.g., <code>https://abcdefghijk.supabase.co</code>)</li>
    <li>Ensure <code>SUPABASE_ANON_KEY</code> is the anon public key (starts with <code>eyJ...</code>)</li>
    <li>Check Supabase dashboard - project should show "Active" status</li>
  </ul>
</div>

<div class="card">
  <h3>Railway Build Fails</h3>
  <ul>
    <li>Check that <strong>Root Directory</strong> is set to <code>railway-server</code></li>
    <li>Check that <strong>Start Command</strong> is set to <code>node server.js</code></li>
    <li>View the build logs for specific error messages</li>
  </ul>
</div>

<div class="card">
  <h3>Progress Not Saving</h3>
  <ul>
    <li>Open browser console (F12) and check for errors</li>
    <li>Verify Railway is running and connected to Supabase</li>
    <li>Check that you entered a username before starting</li>
  </ul>
</div>

<div class="card">
  <h3>AI Grading Not Working</h3>
  <ul>
    <li>Make sure <code>GEMINI_API_KEYS</code> or <code>GROQ_API_KEYS</code> are set in Railway</li>
    <li>The app falls back to keyword grading if AI fails - this is normal</li>
    <li>Check Railway logs for API errors</li>
  </ul>
</div>

<div class="card">
  <h3>Still Stuck?</h3>
  <a href="https://github.com/robjohncolson/lrsl-driller/issues" target="_blank" class="resource-link">Report an Issue on GitHub</a>
  <p style="margin-top: 15px;">Include: which step you're on, the exact error message, and screenshots if possible.</p>
</div>

<!-- ==================== RESOURCES ==================== -->
<h2>Quick Reference Links</h2>

<div class="card">
  <table>
    <tr>
      <th>Service</th>
      <th>Dashboard Link</th>
    </tr>
    <tr>
      <td>GitHub</td>
      <td><a href="https://github.com/" target="_blank">github.com</a></td>
    </tr>
    <tr>
      <td>Supabase</td>
      <td><a href="https://supabase.com/dashboard" target="_blank">supabase.com/dashboard</a></td>
    </tr>
    <tr>
      <td>Railway</td>
      <td><a href="https://railway.app/dashboard" target="_blank">railway.app/dashboard</a></td>
    </tr>
    <tr>
      <td>Vercel</td>
      <td><a href="https://vercel.com/dashboard" target="_blank">vercel.com/dashboard</a></td>
    </tr>
    <tr>
      <td>Project IDX</td>
      <td><a href="https://idx.google.com/" target="_blank">idx.google.com</a></td>
    </tr>
    <tr>
      <td>Gemini API</td>
      <td><a href="https://aistudio.google.com/app/apikey" target="_blank">aistudio.google.com</a></td>
    </tr>
    <tr>
      <td>Groq API</td>
      <td><a href="https://console.groq.com/" target="_blank">console.groq.com</a></td>
    </tr>
  </table>
</div>

<div class="card">
  <h3>Video Tutorials</h3>
  <p>Watch these step-by-step walkthrough videos:</p>
  <ul>
    <li><strong><a href="https://youtu.be/fwL0h1vU8ws" target="_blank">Video 1: Account Setup & GitHub Fork</a></strong> - Covers Parts 1-2</li>
    <li><strong><a href="https://youtu.be/zg3pIdLs4us" target="_blank">Video 2: Supabase Database Setup</a></strong> - Covers Part 3</li>
    <li><strong><a href="https://youtu.be/K_DQSPn9rMc" target="_blank">Video 3: Railway Backend Deployment</a></strong> - Covers Part 4</li>
    <li><strong><a href="https://youtu.be/Xt8FyHxEA00" target="_blank">Video 4: Vercel Frontend & Testing</a></strong> - Covers Parts 5-6</li>
    <li><strong><a href="https://youtu.be/m9lBJNKxZnc" target="_blank">Video 5: AI Grading Setup</a></strong> - Covers Part 7</li>
    <li><strong><a href="https://youtu.be/fH-5rgCg2Zg" target="_blank">Video 6: Project IDX & Code Editing</a></strong> - Covers Part 8</li>
  </ul>
</div>

<footer>
  <p><strong>Driller Platform Setup Guide</strong></p>
  <p>Created for teachers by teachers</p>
  <p><a href="https://github.com/robjohncolson/lrsl-driller" target="_blank">GitHub Repository</a></p>
</footer>

<script>
  // Add copy buttons to code blocks
  document.querySelectorAll('pre').forEach(pre => {
    const btn = document.createElement('button');
    btn.className = 'copy-btn';
    btn.textContent = 'Copy';
    btn.onclick = () => {
      const code = pre.querySelector('code')?.textContent || pre.textContent;
      navigator.clipboard.writeText(code);
      btn.textContent = 'Copied!';
      setTimeout(() => btn.textContent = 'Copy', 2000);
    };
    pre.insertBefore(btn, pre.firstChild);
  });
</script>

</body>
</html>
